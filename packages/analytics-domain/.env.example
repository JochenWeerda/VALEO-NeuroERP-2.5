# Analytics Domain Environment Configuration

# Server Configuration
PORT=3005
HOST=0.0.0.0
NODE_ENV=production

# Database Configuration
POSTGRES_URL=postgres://analytics_user:analytics_password@postgres:5432/analytics_db
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=analytics_db
POSTGRES_USER=analytics_user
POSTGRES_PASSWORD=analytics_password
POSTGRES_SSL=false

# NATS Message Broker
NATS_URL=nats://nats:4222
NATS_USER=
NATS_PASSWORD=

# Authentication & Security
JWKS_URL=https://auth.valero-neuroerp.com/.well-known/jwks.json
JWT_ISSUER=https://auth.valero-neuroerp.com
JWT_AUDIENCE=analytics-domain

# OpenTelemetry Configuration
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318/v1/traces
OTEL_SERVICE_NAME=analytics-domain
OTEL_SERVICE_VERSION=1.0.0
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp

# External ML Service (Optional)
EXTERNAL_ML_SERVICE_URL=http://ml-service:8080
ENABLE_EXTERNAL_ML_MODELS=false

# File Storage
REPORTS_STORAGE_PATH=/app/reports
TEMP_STORAGE_PATH=/tmp/analytics

# Aggregation Configuration
AGGREGATION_BATCH_SIZE=1000
AGGREGATION_MAX_EXECUTION_TIME_MS=300000
ENABLE_AUTO_AGGREGATION=true
AGGREGATION_SCHEDULE=0 */6 * * *  # Every 6 hours

# Forecasting Configuration
DEFAULT_FORECAST_MODEL=ARIMA
DEFAULT_FORECAST_CONFIDENCE_INTERVAL=0.95
MAX_FORECAST_HORIZON=365
FORECAST_CACHE_TTL_MINUTES=60

# KPI Configuration
KPI_CALCULATION_TIMEOUT_MS=30000
KPI_CACHE_TTL_MINUTES=30
ENABLE_KPI_AUTO_CALCULATION=true

# Report Configuration
REPORT_GENERATION_TIMEOUT_MS=120000
REPORT_CACHE_TTL_MINUTES=1440  # 24 hours
MAX_REPORT_SIZE_MB=50

# Cube Configuration
CUBE_REFRESH_TIMEOUT_MS=600000  # 10 minutes
CUBE_CACHE_TTL_MINUTES=60

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_LOGGING=true

# Health Checks
HEALTH_CHECK_INTERVAL_MS=30000
READINESS_CHECK_TIMEOUT_MS=5000
LIVENESS_CHECK_TIMEOUT_MS=3000

# Rate Limiting
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,https://app.valero-neuroerp.com
CORS_CREDENTIALS=true

# Redis Cache (Optional)
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=
ENABLE_REDIS_CACHE=false

# Monitoring & Alerting
ALERT_WEBHOOK_URL=https://hooks.slack.com/services/...
ENABLE_PROMETHEUS_METRICS=true
METRICS_PORT=9090

# Development Configuration
ENABLE_SWAGGER_UI=true
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_CORS_HEADERS=true